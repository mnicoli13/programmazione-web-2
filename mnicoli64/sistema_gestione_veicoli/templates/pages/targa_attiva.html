{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="mb-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="page-title d-flex align-items-center">
      <i class="bi bi-check-circle"></i> {{ page_title }}
    </h1>
  </div>
  <p class="intro-text">{{ page_description }}</p>
</div>

<div id="notification-area"></div>

{# reuse the filter component #}
{% include 'includes/filter.html' %}

<div id="empty-state" class="empty-state" style="display: none;">
  <i class="bi bi-search"></i>
  <h4>Nessuna targa attiva trovata</h4>
  <p>Prova a modificare i filtri di ricerca per trovare i dati desiderati.</p>
</div>

<div id="table-container" data-table-name="targa_attiva" class="mb-4">
  <div class="table-responsive">
    <table id="myTable"
           data-table-name="Targa-Attiva"
           class="table table-striped table-hover">
      <thead>
        <tr>
          <th class="sortable" data-column="targa" data-order="asc">
            Targa <i class="bi bi-arrow-down-up text-muted small"></i>
          </th>
          <th class="sortable" data-column="veicolo" data-order="asc">
            Veicolo <i class="bi bi-arrow-down-up text-muted small"></i>
          </th>
          <th data-column="marca">
            Marca
          </th>
          <th data-column="modello">
            Modello
          </th>
          <th data-column="dataEm">
            Data Emissione
          </th>
        </tr>
      </thead>
      <tbody>
        {# AJAX will fill this in #}
      </tbody>
    </table>
  </div>

  <div id="empty-state" style="display:none;">Nessun risultato</div>

  <div class="table-loader">
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Caricamento...</span>
      </div>
      <p class="mt-2 text-muted">Caricamento dei dati in corso...</p>
    </div>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title">
      <i class="bi bi-info-circle text-primary"></i> Informazioni sulle targhe attive
    </h5>
    <p class="card-text">
      Le targhe attive sono quelle attualmente assegnate a un veicolo. 
      Per visualizzare le targhe restituite, visitare la sezione 
      {% comment %} <a href="{% url 'targa-restituita-list' %}">Targhe Restituite</a>. {% endcomment %}
    </p>
    <div class="mt-3">
      {% comment %} <a href="{% url 'targa-list' %}" class="btn btn-outline-primary me-2">
        <i class="bi bi-tag"></i> Vedi Tutte le Targhe
      </a>
      <a href="{% url 'targa-restituita-list' %}" class="btn btn-outline-primary">
        <i class="bi bi-arrow-return-left"></i> Vedi Targhe Restituite
      </a> {% endcomment %}
    </div>
  </div>
</div>

{% include 'includes/footer.html' %}
{% endblock %}
